// pac-man 28 tiles in width 31 tiles in height
// https://editor.p5js.org/slow_izzm/sketches/QteUQyZUu
// a 6x10 array
// 1 = wall 0 = space
// tileset; 160 X 128
// tileset tile size: 32px x 32px

// prettier-ignore
let tileMap = [
  [6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 7, 6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 7],
  [5, 20, 20, 21, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 6, 2, 2, 7, 20, 6, 2, 2, 2, 7, 20, 5, 5, 20, 6, 2, 2, 2, 7, 20, 6, 2, 2, 7, 20, 5],
  [5, 20, 11, 2, 2, 12, 20, 11, 2, 2, 2, 12, 20, 10, 10, 20, 11, 2, 2, 2, 12, 20, 11, 2, 2, 12, 20, 5],
  [5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 1, 2, 2, 3, 20, 6, 7, 20, 1, 2, 2, 7, 6, 2, 2, 3, 20, 6, 7, 20, 1, 2, 2, 3, 20, 5],
  [5, 20, 20, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 20, 20, 5],
  [11, 2, 2, 2, 2, 7, 20, 16, 16, 2, 2, 3, 20, 11, 12, 20, 1, 2, 2, 16, 5, 20, 6, 2, 2, 2, 2, 12],
  [20, 20, 20, 20, 20, 5, 20, 5, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 5, 20, 5, 20, 20, 20, 20, 20],
  [2, 2, 2, 2, 2, 12, 20, 11, 12, 20, 6, 2, 3, 20, 20, 1, 2, 7, 20, 11, 12, 20, 11, 2, 2, 2, 2, 2],
  [20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20],
  [20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20],
  [2, 2, 2, 2, 2, 7, 20, 6, 7, 20, 11, 2, 2, 2, 2, 2, 2, 12, 20, 6, 7, 20, 6, 2, 2, 2, 2, 2],
  [20, 20, 20, 20, 20, 5, 20, 5, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 5, 20, 5, 20, 20, 20, 20, 20],
  [6, 2, 2, 2, 2, 12, 20, 11, 12, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 11, 12, 20, 11, 2, 2, 2, 2, 7],
  [5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 1, 2, 2, 7, 6, 2, 2, 3, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 1, 2, 2, 7, 20, 6, 2, 2, 2, 7, 20, 5, 5, 20, 6, 2, 2, 2, 7, 20, 6, 2, 2, 3, 20, 5],
  [5, 20, 20, 20, 20, 5, 20, 11, 2, 2, 2, 12, 20, 11, 12, 20, 11, 2, 2, 2, 12, 20, 5, 20, 20, 20, 20, 5],
  [16, 2, 2, 3, 20, 10, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 10, 20, 1, 2, 2, 16],
  [5, 20, 20, 20, 20, 20, 20, 0, 20, 20, 1, 2, 2, 7, 6, 2, 2, 3, 20, 20, 0, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 5, 5, 20, 20, 20, 20, 20, 5, 20, 20, 20, 20, 20, 20, 5],
  [5, 20, 1, 2, 2, 2, 2, 16, 2, 2, 2, 3, 20, 11, 12, 20, 1, 2, 2, 2, 16, 2, 2, 2, 2, 3, 20, 5],
  [5, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 5],
  [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 12]
];

let cellImgs = ["white", "red"];
cellSize = 0;
let mapWidth = tileMap[0].length;
let mapHeight = tileMap.length;
console.log(mapWidth, mapHeight);
let tileSize = 32; // 32px x 32px
function preload() {
  tileSet = loadImage("images/pacmanTileset.png");
  pac_man = loadImage("images/pac_man/pac_man_0.png");
}

// dynamically calcualtes the dimensions of tilemap
function setup() {
  createCanvas(windowWidth, windowHeight);
  background(150);
  ellipseMode(CORNER);
  cellSize = floor(min(width / mapWidth, height / mapHeight));
  //console.log(cellSize);
}

function draw() {
  for (let y = 0; y < mapHeight; y++) {
    for (let x = 0; x < mapWidth; x++) {
      switch (tileMap[y][x]) {
        case 20:
          fill("black");
          rect(x * cellSize, y * cellSize, cellSize, cellSize);
          noStroke();
          break;
        case 21:
          image(
            pac_man,
            x * cellSize,
            y * cellSize,
            cellSize,
            cellSize,
            0,
            0,
            tileSize,
            tileSize
          );
          break;
        default:
          break;
      }
      image(
        tileSet,
        x * cellSize,
        y * cellSize,
        cellSize,
        cellSize,
        (tileMap[y][x] % 5) * tileSize,
        floor(tileMap[y][x] / 5) * tileSize,
        tileSize,
        tileSize
      );
    }
  }
}
console.log(mapWidth);
